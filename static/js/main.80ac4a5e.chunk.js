(this.webpackJsonpthorbelt=this.webpackJsonpthorbelt||[]).push([[0],{158:function(e,t,n){},173:function(e,t){},228:function(e,t){},230:function(e,t){},240:function(e,t){},242:function(e,t){},269:function(e,t){},270:function(e,t){},275:function(e,t){},277:function(e,t){},284:function(e,t){},297:function(e,t){},350:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(152),c=n.n(r),i=(n(158),n(12)),o=n(1),l=n(5),u=n.n(l),d=n(16),j=n(50),p=n.n(j),h=n(51),b=n.n(h),m=n(79),f=n.n(m),x={},O=[];function v(e,t){var n=Object(a.useState)(x[e]||t),s=Object(o.a)(n,2),r=s[0],c=s[1];Object(a.useEffect)((function(){var n=function(){(r!==x[e]||t)&&c(x[e]||t)};return O.push(n),function(){return O.splice(O.indexOf(n),1)}}),[]);return[r,function(t){x[e]=t,O.forEach((function(e){return e()}))}]}function w(e,t){return k("midgard",e,"/v2"+t)}function g(e,t){return k("thornode",e,t)}function k(e,t,n){return fetch("https://".concat("testnet"===t?"testnet.":"").concat(e,".thorchain.info").concat(n)).then(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}return e.t0=Error,e.t1="Non 2xx response code: "+t.status+": ",e.next=5,t.text();case 5:throw e.t2=e.sent,e.t3=e.t1+e.t2,new e.t0(e.t3);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function y(e,t){return Object.assign(Object.assign({},e),t)}function N(e,t,n){for(var a=e.toString(),s=a.length;s<t;s++)a=n+a;return a}function C(e){return e.slice(0,8)+"\u2026"+e.slice(-4)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=parseFloat(e);var n=Math.floor(e).toFixed(0).replace(/(\d)(?=(\d{3})+$)/g,"$1 "),a=t>0?"."+e.toFixed(t).split(".")[1]:"";return n+a}function W(e){var t=new Date(e);return[t.getFullYear(),N(t.getMonth()-1,2,"0"),N(t.getDate(),2,"0")].join("-")}function I(e){var t=new Date(e);return[N(t.getHours(),2,"0"),N(t.getMinutes(),2,"0"),N(t.getSeconds(),2,"0")].join(":")}function E(e){return 0===e.indexOf("thor")?43===e.length&&e.match(/^thor[a-z0-9]{39}$/):0===e.indexOf("tthor")&&(44===e.length&&e.match(/^tthor[a-z0-9]{39}$/))}function M(e,t){return t?"https://".concat("testnet"===e?"testnet.":"","thorchain.net/#/txs/").concat(t):"#"}function L(e,t){return t?"https://".concat("testnet"===e?"testnet.":"","thorchain.net/#/pools/").concat(t):"#"}function R(e,t,n){if("xdefi"===e.type)return function(e,t,n){var a=n.memo,s=n.asset,r=n.recipient,c=n.amount;return new Promise((function(n,i){if(!window.xfi||!window.xfi.thorchain||!e.address)return i(new Error("xdefi wallet not connected"));window.xfi.thorchain.request({method:t,params:[{from:e.address,memo:a,asset:s,recipient:r,amount:{amount:c,decimals:8}}]},(function(e,t){if(e)return i(e);n(t)}))}))}(e,t,n);if("walletconnect"===e.type)return function(e,t,n){var a=n.memo,s=n.asset,r=n.recipient,c=n.amount;return new Promise((function(n,i){var o=new p.a({bridge:"https://bridge.walletconnect.org",qrcodeModal:b.a});function l(){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(u.a.mark((function l(){var d,j,p,h,b,m;return u.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,d={type:"thorchain/MsgSend",value:{amount:[{denom:(s||"rune").toLowerCase(),amount:String(c)}],from_address:e.address,to_address:r}},"deposit"===t&&(d={type:"thorchain/MsgDeposit",value:{coins:[{asset:s||"THOR.RUNE",amount:String(c)}],memo:a,signer:e.address}}),l.next=5,fetch("https://thornode.thorchain.info/auth/accounts/"+e.address).then((function(e){return e.json()}));case 5:return j=l.sent,p=j.result.value,h={messages:[{rawJsonMessage:{type:d.type,value:f()(d.value)}}],fee:{gas:"20000000",amounts:[]},memo:"",chainId:"thorchain",sequence:p.sequence,accountNumber:p.account_number},l.next=10,o.sendCustomRequest({jsonrpc:"2.0",method:"trust_signTransaction",params:[{network:931,transaction:f()(h)}]});case 10:return b=l.sent,l.next=13,fetch("https://thornode.thorchain.info/txs",{method:"POST",headers:{"Content-Type":"application/json"},body:b}).then((function(e){return e.json()}));case 13:if((m=l.sent).logs){l.next=16;break}return l.abrupt("return",i(new Error("Transaction failed: "+m.raw_log)));case 16:n(m.txhash),l.next=22;break;case 19:l.prev=19,l.t0=l.catch(0),i(l.t0);case 22:case"end":return l.stop()}}),l,null,[[0,19]])})))).apply(this,arguments)}o.connected?l():(o.createSession(),o.on("connect",function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",i(t));case 2:l();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))}))}(e,t,n);throw new Error("Connected wallet can't send transactions, try connecting XDefi or WalletConnect")}window.globalState=x;var D={testnet:"BNB.BUSD-74E",mainnet:"BNB.BUSD-BD1"},z=JSON.stringify([{name:"default",root:{type:"node",size:100,data:{type:"empty"}}}]),F={selected:null,connected:null,watched:[]},A=n(0);var B=function(e){var t="icon h-6 w-6";switch(e.name){case"plus":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})});case"trash":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});case"edit":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})});case"save":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-7a2 2 0 012-2h2m3-4H9a2 2 0 00-2 2v7a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-1m-1 4l-3 3m0 0l-3-3m3 3V3"})});case"times":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"arrows-alt-v":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})});case"arrows-alt-h":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})});case"chevron-up":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})});case"chevron-down":return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});case"cog":return Object(A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:t,children:[Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Object(A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});default:throw new Error("Unknow icon name: "+e.name)}};function U(e){var t=e.title,n=e.path,a=e.updateWorkspace,s=e.children,r=e.right,c=void 0===r?null:r;function i(){a((function(e){return Object.assign(e,{data:{type:"empty"}})}),n)}function o(e){a((function(t){return"vertically"===e?{type:"vsplit",size:t.size,top:Object.assign(t,{size:50}),bottom:{type:"node",size:50,data:{type:"empty"}}}:{type:"hsplit",size:t.size,left:Object.assign(t,{size:50}),right:{type:"node",size:50,data:{type:"empty"}}}}),n)}return Object(A.jsxs)("div",{className:"box",children:[Object(A.jsxs)("div",{className:"box-header",children:[Object(A.jsx)("span",{className:"box-header-title",title:"Change panel type",onClick:i,children:t}),Object(A.jsx)("div",{className:"box-header-icon",title:"Close",onClick:function(){0!==n.length?a((function(){return null}),n):i()},children:Object(A.jsx)(B,{name:"times"})}),Object(A.jsx)("div",{className:"box-header-icon",title:"Split Horizontally",onClick:o.bind(null,"horizontally"),children:Object(A.jsx)(B,{name:"arrows-alt-h"})}),Object(A.jsx)("div",{className:"box-header-icon",title:"Split Vertically",onClick:o.bind(null,"vertically"),children:Object(A.jsx)(B,{name:"arrows-alt-v"})}),c]}),Object(A.jsx)("div",{className:"box-contents",children:s})]})}function V(e){var t=e.path,n=e.updateWorkspace,a=v("wallets",{}),s=Object(o.a)(a,1)[0].selected,r=s?s.network:"mainnet";function c(e,a){a.preventDefault();n((function(t){return y(t,{data:{type:e}})}),t)}return Object(A.jsx)(U,{title:"Empty",path:t,updateWorkspace:n,children:Object(A.jsxs)("div",{children:[Object(A.jsx)("br",{}),Object(A.jsx)("p",{className:"text-center",children:"select a panel type:"}),Object(A.jsxs)("div",{className:"node-empty",children:[Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"stats"),children:[Object(A.jsx)("strong",{children:"stats."}),Object(A.jsx)("span",{children:"global thorchain stats."})]}),Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"pools"),children:[Object(A.jsx)("strong",{children:"pools."}),Object(A.jsx)("span",{children:"list of thorchain pools."})]}),Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"wallet"),children:[Object(A.jsx)("strong",{children:"wallet."}),Object(A.jsx)("span",{children:"your rune, synth and lp balances."})]}),Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"chart"),children:[Object(A.jsx)("strong",{children:"chart."}),Object(A.jsx)("span",{children:"price chart for a pool."})]}),Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"history"),children:[Object(A.jsx)("strong",{children:"history."}),Object(A.jsx)("span",{children:"action history for current address."})]}),Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"manualTransaction"),children:[Object(A.jsx)("strong",{children:"manual transaction."}),Object(A.jsx)("span",{children:"send in a manual thorchain transaction."})]}),"testnet"===r?Object(A.jsxs)("button",{className:"button",onClick:c.bind(null,"trade"),children:[Object(A.jsx)("strong",{children:"trade."}),Object(A.jsx)("span",{children:"buy/sell assets using synthetics."})]}):null]})]})})}function P(e){var t=e.path,n=e.updateWorkspace,a=v("stats"),s=Object(o.a)(a,1)[0];return Object(A.jsx)(U,{title:"Stats",path:t,updateWorkspace:n,children:s?Object(A.jsxs)("div",{className:"node-empty",children:[Object(A.jsxs)("button",{className:"button",children:[Object(A.jsxs)("strong",{className:"text-primary",children:["$",S(2*parseInt(s.runeDepth)/Math.pow(10,8)*parseFloat(s.runePriceUSD))]}),Object(A.jsx)("span",{children:"total liquidity"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsxs)("strong",{children:["$",S(parseInt(s.swapVolume)/Math.pow(10,8)*parseFloat(s.runePriceUSD))]}),Object(A.jsx)("span",{children:"total swap volume"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsx)("strong",{children:S(s.swapCount24h)}),Object(A.jsx)("span",{children:"24h swap count"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsx)("strong",{children:S(s.dailyActiveUsers)}),Object(A.jsx)("span",{children:"24h active users"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsx)("strong",{children:S(s.swapCount30d)}),Object(A.jsx)("span",{children:"30d swap count"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsx)("strong",{children:S(s.monthlyActiveUsers)}),Object(A.jsx)("span",{children:"30d active users"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsx)("strong",{children:S(s.swapCount)}),Object(A.jsx)("span",{children:"total swap count"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsx)("strong",{children:S(s.uniqueSwapperCount)}),Object(A.jsx)("span",{children:"unique users"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsxs)("strong",{children:["$",S(s.runePriceUSD,2)]}),Object(A.jsx)("span",{children:"rune price"})]}),Object(A.jsxs)("button",{className:"button",children:[Object(A.jsxs)("strong",{children:["$",S(parseFloat(s.impermanentLossProtectionPaid)/Math.pow(10,8)*parseFloat(s.runePriceUSD))]}),Object(A.jsx)("span",{children:"il paid"})]})]}):"loading..."})}var T=n(11);function _(e){var t=e.headers,n=e.rows,s=e.defaultSort,r=e.onSortChange,c=e.filters,i=e.onFilterChange,l=Object(a.useState)(c||{}),u=Object(o.a)(l,2),d=u[0],j=u[1],p=Object(a.useState)(s||"+"+t[0].id),h=Object(o.a)(p,2),b=h[0],m=h[1];function f(e,t){var n=null;"all"!==t.target.value&&(n=t.target.value);var a=y(d,Object(T.a)({},e,n));j(a),i&&i(a)}function x(e){var t;t=b&&b.slice(1)===e?("+"===b[0]?"-":"+")+b.slice(1):"+"+e,m(t),r&&r(t)}var O,v=n.filter((function(e){for(var t in d)if(d[t]&&e[t]!==d[t])return!1;return!0})),w=b.slice(1);O=function(e){return w+"Value"in e?e[w+"Value"]:e[w]},v=v.sort((function(e,t){var n=O(e),a=O(t);return"number"===typeof n?n-a:n>a})),"-"===b[0]&&(v=v.reverse());return Object(A.jsxs)("table",{className:"trading-table",children:[Object(A.jsxs)("thead",{children:[Object(A.jsx)("tr",{children:t.map((function(e){return Object(A.jsx)("th",{className:e.class,style:e.style||{},children:e.filter?Object(A.jsxs)("select",{onChange:f.bind(null,e.id),value:d[e.id]||"all",children:[Object(A.jsx)("option",{value:"all",children:"all"}),(t=e.id,n.map((function(e){return e[t+"Value"]||e[t]})).filter((function(e,t,n){return n.indexOf(e)===t})).sort()).map((function(e){return Object(A.jsx)("option",{value:e,children:e},e)}))]}):null},e.id);var t}))}),Object(A.jsx)("tr",{children:t.map((function(e){return Object(A.jsxs)("th",{className:e.class,style:e.style||{},onClick:x.bind(null,e.id),children:[b.slice(1)===e.id?b[0]:"",e.name||e.id]},e.id)}))})]}),Object(A.jsx)("tbody",{children:v.map((function(e,n){return Object(A.jsx)("tr",{children:t.map((function(t){return Object(A.jsx)("td",{className:t.class+" "+e[t.id+"Class"]||"",style:t.style||{},title:e[t.id+"Title"]||"",children:e[t.id]},t.id)}))},n)}))})]})}function H(e){var t=e.data,n=e.path,s=e.updateWorkspace,r=Object(a.useState)(!1),c=Object(o.a)(r,2),i=c[0],l=c[1],u=v("wallets",{}),d=Object(o.a)(u,1)[0].selected,j=v("pools",[]),p=Object(o.a)(j,1)[0],h=d?d.network:"mainnet";function b(e,t){s((function(n){return y(n,{data:y(n.data,Object(T.a)({},e,t))})}),n)}function m(e,n){var a=(t.hiddenColumns||[]).filter((function(t){return t!==e}));n.target.checked||a.push(e),b("hiddenColumns",a)}function f(){l(!i)}var x=[{id:"asset",filter:!0},{id:"status",filter:!0},{id:"price",class:"text-right"},{id:"apy",class:"text-right"},{id:"depth",class:"text-right"},{id:"volume",name:"volume (24h)",class:"text-right"}],O=p.map((function(e){return{asset:Object(A.jsx)("a",{target:"_blank",href:L(h,e.asset),children:e.asset}),assetValue:e.asset,status:e.status,price:S(e.price,2),priceValue:e.price,apy:S(100*e.apy,2),apyValue:e.apy,depth:S(e.depth),depthValue:e.depth,volume:S(e.volume),volumeValue:e.volume}}));return Object(A.jsx)(U,{title:"Pools",path:n,updateWorkspace:s,right:Object(A.jsx)("div",{className:"box-header-icon",title:"Settings",onClick:f,children:Object(A.jsx)(B,{name:"cog"})}),children:i?Object(A.jsxs)("div",{className:"p-2",children:[Object(A.jsxs)("div",{className:"row mb-4",children:[Object(A.jsx)("div",{className:"text-lg text-bold",children:"panel settings"}),Object(A.jsx)("div",{className:"text-right",children:Object(A.jsx)("a",{onClick:f,children:"close"})})]}),Object(A.jsx)("div",{className:"mb-2 text-bold",children:"columns"}),x.map((function(e){return Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("input",{type:"checkbox",className:"mr-2",checked:!(t.hiddenColumns||[]).includes(e.id),onChange:m.bind(null,e.id)}),e.name||e.id]},e.id)}))]}):Object(A.jsx)(_,{headers:x.filter((function(e){return!(t.hiddenColumns||[]).includes(e.id)})),rows:O,filters:t.filters,onFilterChange:b.bind(null,"filters"),defaultSort:t.sort,onSortChange:b.bind(null,"sort")})})}function q(e){var t=e.data,n=e.path,s=e.updateWorkspace,r=Object(a.useState)(!1),c=Object(o.a)(r,2),i=c[0],l=c[1],u=v("wallets",{}),d=Object(o.a)(u,1)[0].selected,j=v("pools",[]),p=Object(o.a)(j,1)[0],h=Object(a.useState)([]),b=Object(o.a)(h,2),m=b[0],f=b[1],x=Object(a.useState)([]),O=Object(o.a)(x,2),k=O[0],N=O[1];function C(e,t){s((function(n){return y(n,{data:y(n.data,Object(T.a)({},e,t))})}),n)}function I(e,n){var a=(t.hiddenColumns||[]).filter((function(t){return t!==e}));n.target.checked||a.push(e),C("hiddenColumns",a)}function E(){l(!i)}Object(a.useEffect)((function(){if(null===d||void 0===d?void 0:d.address){f([]),t();var e=setInterval(t,5e3);return function(){return clearInterval(e)}}function t(){w(d.network,"/member/"+d.address).then((function(e){return f(e.pools)}),(function(){})),g(d.network,"/cosmos/bank/v1beta1/balances/"+d.address).then((function(e){return N(e.balances)}),(function(){}))}}),[d]);var M=[{id:"asset",filter:!0},{id:"value",class:"text-right"},{id:"assetAmount",name:"asset",class:"text-right"},{id:"assetRemoved",name:"-asset",class:"text-right"},{id:"runeAmount",name:"rune",class:"text-right"},{id:"runeRemoved",name:"-rune",class:"text-right"},{id:"start",name:"first added",class:"text-right"}],L=[];return k.forEach((function(e){var t=e.denom.toUpperCase().replace("/","."),n=p.find((function(e){return e.asset===t})),a=p.find((function(e){return e.asset===D[d?d.network:"mainnet"]})),s=0;"rune"===e.denom&&a?s=a.depthAsset/a.depthRune:n&&(s=n.price);var r=parseInt(e.amount)/Math.pow(10,8);L.push({asset:e.denom.toUpperCase(),value:S(r*s,2),valueValue:r*s,assetAmount:S(r,2),assetAmountValue:r,assetRemoved:"",runeAmount:"",runeRemoved:"",start:""})})),m.forEach((function(e){var t=p.find((function(t){return t.asset===e.pool}));if(t){var n=(parseInt(e.assetAdded)-parseInt(e.assetWithdrawn))/Math.pow(10,8),a=(parseInt(e.runeAdded)-parseInt(e.runeWithdrawn))/Math.pow(10,8),s=parseInt(e.liquidityUnits)/t.units*(2*t.depthAsset/Math.pow(10,8))*t.price;L.push({asset:e.pool+" Pool",value:S(s,2),valueValue:s,assetAmount:S(n,2),assetAmountValue:n,assetRemoved:S(parseInt(e.assetWithdrawn)/Math.pow(10,8),2),assetRemovedValue:parseInt(e.assetWithdrawn),runeAmount:S(a,1),runeAmountValue:parseInt(a),runeRemoved:S(parseInt(e.runeWithdrawn)/Math.pow(10,8),1),runeRemovedValue:parseInt(e.assetWithdrawn),start:W(1e3*parseInt(e.dateFirstAdded))})}})),Object(A.jsx)(U,{title:"Wallet",path:n,updateWorkspace:s,right:Object(A.jsx)("div",{className:"box-header-icon",title:"Settings",onClick:E,children:Object(A.jsx)(B,{name:"cog"})}),children:i?Object(A.jsxs)("div",{className:"p-2",children:[Object(A.jsxs)("div",{className:"row mb-4",children:[Object(A.jsx)("div",{className:"text-lg text-bold",children:"panel settings"}),Object(A.jsx)("div",{className:"text-right",children:Object(A.jsx)("a",{onClick:E,children:"close"})})]}),Object(A.jsx)("div",{className:"mb-2 text-bold",children:"columns"}),M.map((function(e){return Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("input",{type:"checkbox",className:"mr-2",checked:!(t.hiddenColumns||[]).includes(e.id),onChange:I.bind(null,e.id)}),e.name||e.id]},e.id)}))]}):Object(A.jsx)(_,{headers:M.filter((function(e){return!(t.hiddenColumns||[]).includes(e.id)})),rows:L,filters:t.filters,onFilterChange:C.bind(null,"filters"),defaultSort:t.sort,onSortChange:C.bind(null,"sort")})})}var $=n(153);function J(e){var t=e.data,n=e.path,s=e.updateWorkspace,r=Object(a.useRef)(),c=v("wallets",{}),i=Object(o.a)(c,1)[0].selected,l=v("pools",[]),u=Object(o.a)(l,1)[0],d=Object(a.useState)(t.asset||"BTC.BTC"),j=Object(o.a)(d,2),p=j[0],h=j[1],b=Object(a.useState)(t.range||"1d"),m=Object(o.a)(b,2),f=m[0],x=m[1],O=Object(a.useState)(),g=Object(o.a)(O,2),k=g[0],N=g[1],C=u.find((function(e){return e.asset===p})),W=C?C.price:0;if("THOR.RUNE"===p){var I=u.find((function(e){return e.asset===D[i?i.network:"mainnet"]}));I&&(W=I.depthAsset/I.depthRune)}function E(e,t){var n={"1d":"interval=5min&count=288","1w":"interval=hour&count=168","3m":"interval=day&count=90","1y":"interval=day&count=365"},a=i?i.network:"mainnet";"THOR.RUNE"===e?w(a,"/history/depths/"+D[a]+"?"+n[t]).then((function(e){return N(e.intervals.map((function(e){return y(e,{assetPriceUSD:1/parseFloat(e.assetPrice)})})))}),(function(){})):w(a,"/history/depths/"+e+"?"+n[t]).then((function(e){return N(e.intervals)}),(function(){}))}return Object(a.useEffect)((function(){E(p,f);var e=setInterval((function(){return E(p,f)}),15e3);return function(){return clearInterval(e)}}),[p,f]),Object(a.useEffect)((function(){var e=r.current;if(e&&k){for(;e.lastChild;)e.removeChild(e.lastChild);var t=e.getBoundingClientRect(),n=Object($.a)(e,{width:t.width,height:t.height,layout:{backgroundColor:"#111827",textColor:"#ffffff",fontSize:12,fontFamily:"IBM Plex Mono"},vertLines:{color:"rgba(40,40,40,0.2)",style:1,visible:!0},horzLines:{color:"rgba(40,40,40,0.2)",style:1,visible:!0},timeScale:{fixLeftEdge:!0,timeVisible:!0}});n.addAreaSeries({bottomColor:"rgba(35, 220, 200, 0.5)",lineColor:"rgba(35, 220, 200, 1)"}).setData(k.map((function(e){return{time:parseInt(e.startTime),value:parseFloat(e.assetPriceUSD)}}))),n.timeScale().setVisibleLogicalRange({from:0,to:k.length})}}),[r.current,k]),Object(A.jsx)(U,{title:"Chart",path:n,updateWorkspace:s,children:Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(A.jsxs)("div",{style:{display:"flex",padding:"4px"},children:[Object(A.jsxs)("select",{value:p,onChange:function(e){var t=e.target.value;h(t),s((function(e){return y(e,{data:y(e.data,{asset:t})})}),n)},style:{padding:"4px 8px",width:"100px",marginRight:"8px"},children:[Object(A.jsx)("option",{value:"THOR.RUNE",children:"THOR.RUNE"}),u.sort((function(e,t){return e.depth-t.depth})).map((function(e){return Object(A.jsx)("option",{value:e.asset,children:e.asset.slice(0,12)},e.asset)}))]}),Object(A.jsxs)("select",{value:f,onChange:function(e){var t=e.target.value;x(t),s((function(e){return y(e,{data:y(e.data,{range:t})})}),n)},style:{padding:"4px 8px",width:"100px"},children:[Object(A.jsx)("option",{value:"1d",children:"past day"}),Object(A.jsx)("option",{value:"1w",children:"past week"}),Object(A.jsx)("option",{value:"3m",children:"past 3 months"}),Object(A.jsx)("option",{value:"1y",children:"past year"})]}),Object(A.jsx)("div",{style:{flex:"1"}}),Object(A.jsx)("div",{children:S(W,3)})]}),Object(A.jsx)("div",{style:{flex:"1"},ref:r})]})})}function X(e){var t=e.data,n=e.path,s=e.updateWorkspace,r=Object(a.useState)(!1),c=Object(o.a)(r,2),i=c[0],l=c[1],u=v("wallets",{}),d=Object(o.a)(u,1)[0].selected,j=Object(a.useState)([]),p=Object(o.a)(j,2),h=p[0],b=p[1];function m(e,t){s((function(n){return y(n,{data:y(n.data,Object(T.a)({},e,t))})}),n)}function f(e,n){var a=(t.hiddenColumns||[]).filter((function(t){return t!==e}));n.target.checked||a.push(e),m("hiddenColumns",a)}function x(){l(!i)}Object(a.useEffect)((function(){(null===d||void 0===d?void 0:d.address)&&(b([]),w((null===d||void 0===d?void 0:d.network)||"mainnet","/actions?limit=50&offset=0&address="+d.address).then((function(e){return b(e.actions)}),(function(){})))}),[d]);var O=[{id:"time",class:"w-datetime"},{id:"type",filter:!0},{id:"status",filter:!0},{id:"asset",filter:!0},{id:"asset2",filter:!0},{id:"amount",class:"text-right"}],g=[];return h.forEach((function(e){var t="",n="",a=0;"switch"===e.type&&(t=e.in[0].coins[0].asset,n=e.out[0].coins[0].asset,a=parseInt(e.out[0].coins[0].amount)/Math.pow(10,8)),"addLiquidity"===e.type&&(t=e.pools[0],n=e.in[0].coins[0].asset,a=parseInt(e.in[0].coins[0].amount)/Math.pow(10,8)),"withdraw"===e.type&&(t=e.pools[0],n=e.out[0].coins[0].asset,a=parseInt(e.out[0].coins[0].amount)/Math.pow(10,8)),"swap"===e.type&&(t=e.in[0].coins[0].asset,e.out.length>0&&(n=e.out[0].coins[0].asset,a=parseInt(e.out[0].coins[0].amount)/Math.pow(10,8)));var s="";e.out.length>0&&(s=e.out[0].txID),e.in.length>0&&(s=e.in[0].txID),g.push({time:Object(A.jsx)("a",{target:"_blank",href:M((null===d||void 0===d?void 0:d.network)||"mainnet",s),children:W(parseInt(e.date)/1e6).slice(2)+" "+I(parseInt(e.date)/1e6)}),timeValue:parseInt(e.date),type:e.type,status:e.status,asset:t,asset2:n,amount:S(a,2),amountValue:a})})),Object(A.jsx)(U,{title:"History",path:n,updateWorkspace:s,right:Object(A.jsx)("div",{className:"box-header-icon",title:"Settings",onClick:x,children:Object(A.jsx)(B,{name:"cog"})}),children:i?Object(A.jsxs)("div",{className:"p-2",children:[Object(A.jsxs)("div",{className:"row mb-4",children:[Object(A.jsx)("div",{className:"text-lg text-bold",children:"panel settings"}),Object(A.jsx)("div",{className:"text-right",children:Object(A.jsx)("a",{onClick:x,children:"close"})})]}),Object(A.jsx)("div",{className:"mb-2 text-bold",children:"columns"}),O.map((function(e){return Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("input",{type:"checkbox",className:"mr-2",checked:!(t.hiddenColumns||[]).includes(e.id),onChange:f.bind(null,e.id)}),e.name||e.id]},e.id)}))]}):Object(A.jsx)(_,{headers:O.filter((function(e){return!(t.hiddenColumns||[]).includes(e.id)})),rows:g,filters:t.filters,onFilterChange:m.bind(null,"filters"),defaultSort:t.sort||"-time",onSortChange:m.bind(null,"sort")})})}function Y(e){var t=e.data,n=e.path,s=e.updateWorkspace,r=v("wallets",{}),c=Object(o.a)(r,1)[0].selected,i=v("pools",[]),l=Object(o.a)(i,1)[0],j=Object(a.useState)(""),p=Object(o.a)(j,2),h=p[0],b=p[1],m=Object(a.useState)(!1),f=Object(o.a)(m,2),x=f[0],O=f[1],w=Object(a.useState)(),g=Object(o.a)(w,2),k=g[0],N=g[1],C=Object(a.useState)(y({type:"transfer",action:"swap",percent:"100"},t.options||{})),S=Object(o.a)(C,2),W=S[0],I=S[1];function L(){var e=W.asset,t=void 0===e?"":e,n=W.address,a=void 0===n?"":n,s=W.limit,r=void 0===s?"":s,c=W.percent,i=parseInt(100*parseFloat(void 0===c?"":c)),o=W.action.toUpperCase();return"swap"===W.action?o+=":".concat(t,":").concat(a,":").concat(r):"add"===W.action?o+=":".concat(t,":").concat(a):"withdraw"===W.action?o+=":".concat(t,":").concat(i).concat(W.assym?":"+W.assym:""):"bond"===W.action||"leave"===W.action?o+=":".concat(a):"unbond"===W.action&&(o+=":".concat(a,":").concat(i)),o}function D(e,t){var a=y(W,Object(T.a)({},e,t));I(a);s((function(e){return y(e,{data:y(e.data,{options:a})})}),n)}function z(){return(z=Object(d.a)(u.a.mark((function e(t){var a,r,i,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b(""),N(),null===c||void 0===c?void 0:c.address){e.next=5;break}return e.abrupt("return",b("no wallet connected"));case 5:if(a=parseInt(parseFloat(W.amount||"0")*Math.pow(10,8)),!Number.isNaN(a)){e.next=8;break}return e.abrupt("return",b("amount is not a valid number"));case 8:if("transfer"!==W.type){e.next=13;break}if(E(W.address)){e.next=11;break}return e.abrupt("return",b("recipient address is not valid"));case 11:e.next=22;break;case 13:if("deposit"!==W.type){e.next=22;break}if(!["withdraw","unbond","leave"].includes(W.action)){e.next=18;break}if(!a){e.next=17;break}return e.abrupt("return",b("don't send an amount for "+W.action));case 17:a=1;case 18:if(!["swap","add","withdraw"].includes(W.action)){e.next=22;break}if(l.find((function(e){return e.asset===W.asset}))){e.next=22;break}return e.abrupt("return",b("selected asset is not valid"));case 22:if(e.prev=22,"xdefi"!==c.type&&O(!0),"transfer"!==W.type){e.next=31;break}return e.next=27,R(c,"transfer",{amount:a,recipient:W.address});case 27:r=e.sent,N(r),e.next=37;break;case 31:if("deposit"!==W.type){e.next=37;break}return i=L(),e.next=35,R(c,"deposit",{from:c.address,amount:a,memo:i});case 35:o=e.sent,N(o);case 37:d=y(W,{amount:"",limit:"",percent:"100"}),I(d),s((function(e){return y(e,{data:y(e.data,{options:d})})}),n),e.next=47;break;case 43:e.prev=43,e.t0=e.catch(22),console.error(e.t0),b(e.t0.toString());case 47:return e.prev=47,O(!1),e.finish(47);case 50:case"end":return e.stop()}}),e,null,[[22,43,47,50]])})))).apply(this,arguments)}return Object(A.jsx)(U,{title:"Manual Transaction",path:n,updateWorkspace:s,children:Object(A.jsxs)("form",{className:"p-2",onSubmit:function(e){return z.apply(this,arguments)},children:[Object(A.jsxs)("div",{className:"row mb-2",children:[Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"type"}),Object(A.jsxs)("select",{value:W.type,onChange:function(e){return D("type",e.target.value)},children:[Object(A.jsx)("option",{value:"transfer",children:"transfer"}),Object(A.jsx)("option",{value:"deposit",children:"deposit"})]})]}),Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"input amount"}),Object(A.jsx)("input",{type:"text",value:W.amount||"",onChange:function(e){return D("amount",e.target.value)},placeholder:"0.0"})]})]}),"deposit"===W.type?Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"row mb-2",children:[Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"action"}),Object(A.jsxs)("select",{value:W.action,onChange:function(e){return D("action",e.target.value)},children:[Object(A.jsx)("option",{value:"swap",children:"swap"}),Object(A.jsx)("option",{value:"add",children:"add"}),Object(A.jsx)("option",{value:"withdraw",children:"withdraw"}),Object(A.jsx)("option",{value:"bond",children:"bond"}),Object(A.jsx)("option",{value:"unbond",children:"unbond"}),Object(A.jsx)("option",{value:"leave",children:"leave"})]})]}),["swap","add","withdraw"].includes(W.action)?Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{children:"asset"}),Object(A.jsx)("select",{value:W.asset||"",onChange:function(e){return D("asset",e.target.value)},children:l.map((function(e){return Object(A.jsx)("option",{value:e.asset,children:e.asset},e.asset)}))})]}):null,["bond","unbond","leave"].includes(W.action)?Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"address"}),Object(A.jsx)("input",{type:"text",value:W.address||"",onChange:function(e){return D("address",e.target.value)},placeholder:"e.g. thor1a2b3c..."})]}):null]}),Object(A.jsxs)("div",{className:"row mb-2",children:[["swap","add"].includes(W.action)?Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"address (optional)"}),Object(A.jsx)("input",{type:"text",value:W.address||"",onChange:function(e){return D("address",e.target.value)},placeholder:"e.g. thor1a2b3c..."})]}):null,"swap"===W.action?Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"limit"}),Object(A.jsx)("input",{type:"text",value:W.limit||"",onChange:function(e){return D("limit",e.target.value)}})]}):null,["withdraw","unbond"].includes(W.action)?Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"percentage"}),Object(A.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:W.percent||"",onChange:function(e){return D("percent",e.target.value)}})]}):null,["withdraw"].includes(W.action)?Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{children:"assym. asset (optional)"}),Object(A.jsx)("input",{type:"text",value:W.assym||"",onChange:function(e){return D("assym",e.target.value)},placeholder:"e.g. THOR.RUNE"})]}):null]})]}):Object(A.jsxs)("div",{className:"mb-2",children:[Object(A.jsx)("label",{children:"recipient address"}),Object(A.jsx)("input",{type:"text",value:W.address||"",onChange:function(e){return D("address",e.target.value)},placeholder:"e.g. thor1a2b3c..."})]}),"deposit"===W.type?Object(A.jsxs)("div",{className:"truncate mb-2",children:["memo: ",L()]}):null,h?Object(A.jsx)("div",{className:"text-red mb-2",children:h}):null,Object(A.jsx)("button",{type:"submit",className:"btn w-full mb-2",disabled:x,children:x?"loading...":"submit"}),k?Object(A.jsxs)("div",{className:"truncate",children:["tx:"," ",Object(A.jsx)("a",{href:M((null===c||void 0===c?void 0:c.network)||"mainnet",k),target:"_blank",children:k})]}):null]})})}function G(e){var t=e.data,n=e.path,s=e.updateWorkspace,r=v("wallets",{}),c=Object(o.a)(r,1)[0].selected,i=v("pools",[]),l=Object(o.a)(i,1)[0],j=Object(a.useState)(""),p=Object(o.a)(j,2),h=p[0],b=p[1],m=Object(a.useState)(!1),f=Object(o.a)(m,2),x=f[0],O=f[1],w=Object(a.useState)(),g=Object(o.a)(w,2),k=g[0],N=g[1],C=Object(a.useState)(y({},t.options||{})),S=Object(o.a)(C,2),W=S[0],I=S[1],E=l.find((function(e){return e.asset===W.asset}));function L(e,t){var a=y(W,Object(T.a)({},e,t));I(a);s((function(e){return y(e,{data:y(e.data,{options:a})})}),n)}function D(e,t){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(u.a.mark((function e(t,n){var a,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b(""),O(!0),null===c||void 0===c?void 0:c.address){e.next=5;break}return e.abrupt("return",b("no wallet connected"));case 5:if(a=parseInt(parseFloat(W.amount)*Math.pow(10,8)),!Number.isNaN(a)){e.next=8;break}return e.abrupt("return",b("amount is not a valid number"));case 8:if(E){e.next=10;break}return e.abrupt("return",b("selected asset is not valid"));case 10:return e.prev=10,O(!1),"buy"===t&&(a=parseInt(a*(E.depthRune/E.depthAsset))),s=W.asset.replace(".","/"),e.next=16,R(c,"deposit",{from:c.address,amount:a,memo:"SWAP:"+("buy"===t?s:"THOR.RUNE"),asset:"buy"===t?void 0:{chain:"THOR",symbol:s.toUpperCase(),ticker:s.toUpperCase()}});case 16:r=e.sent,N(r),L("amount",""),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),console.error(e.t0),b(e.t0.toString());case 25:return e.prev=25,O(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[10,21,25,28]])})))).apply(this,arguments)}return Object(A.jsx)(U,{title:"Trade",path:n,updateWorkspace:s,children:Object(A.jsxs)("form",{className:"p-2",onSubmit:function(e){return e.preventDefault()},children:[Object(A.jsxs)("div",{className:"row mb-2",children:[Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"asset"}),Object(A.jsxs)("select",{value:W.asset||"",onChange:function(e){return L("asset",e.target.value)},children:[Object(A.jsx)("option",{value:"",children:"Select an asset"}),l.map((function(e){return Object(A.jsx)("option",{value:e.asset,children:e.asset},e.asset)}))]})]}),Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("label",{children:"amount"}),Object(A.jsx)("input",{type:"text",value:W.amount||"",onChange:function(e){return L("amount",e.target.value)},placeholder:"0.0"})]})]}),Object(A.jsxs)("div",{className:"row mb-2",children:[Object(A.jsx)("div",{className:"truncate",children:E?"price: $"+E.price.toFixed(3):""}),Object(A.jsx)("div",{className:"truncate",children:E?" value: $"+((parseFloat(W.amount)||0)*E.price).toFixed(2):""})]}),h?Object(A.jsx)("div",{className:"text-red mb-2",children:h}):null,Object(A.jsxs)("div",{className:"row mb-2",children:[Object(A.jsx)("button",{type:"submit",className:"btn w-full mb-2 mr-2",disabled:x,onClick:D.bind(null,"sell"),children:x?"loading...":"sell"}),Object(A.jsx)("button",{type:"submit",className:"btn w-full mb-2",disabled:x,onClick:D.bind(null,"buy"),children:x?"loading...":"buy"})]}),k?Object(A.jsxs)("div",{className:"truncate",children:["tx:"," ",Object(A.jsx)("a",{href:M(c.network,k),target:"_blank",children:k})]}):null]})})}function K(e){var t=e.type,n=e.size,s=e.data,r=e.path,c=e.updateWorkspace,l=e.top,u=e.bottom,d=e.left,j=e.right,p=Object(a.useRef)(),h=Object(a.useState)(!1),b=Object(o.a)(h,2),m=b[0],f=b[1],x=function(e){var n=p.current,a=n.querySelectorAll(".workspace-node"),s=n.getBoundingClientRect(),i=(("hsplit"===t?e.clientX:e.clientY)-("hsplit"===t?s.left:s.top))/("hsplit"===t?s.width:s.height)*100;i=Math.min(85,Math.max(15,i)),i=5*Math.round(i/5),a[0].style.flexBasis=i+"%",a[1].style.flexBasis=100-i+"%","hsplit"===t?(c((function(e){return y(e,{size:i})}),r.concat(["left"])),c((function(e){return y(e,{size:100-i})}),r.concat(["right"]))):(c((function(e){return y(e,{size:i})}),r.concat(["top"])),c((function(e){return y(e,{size:100-i})}),r.concat(["bottom"])))};function O(){f(!0)}function v(){f(!1),window.removeEventListener("mousemove",x)}Object(a.useEffect)((function(){if(m)return window.addEventListener("mouseup",v),window.addEventListener("mousemove",x),function(){window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",x)}}),[m]);switch(t){case"vsplit":return Object(A.jsxs)("div",{ref:p,className:"workspace-node workspace-vsplit "+(m?"is-dragging":""),style:{flexBasis:n+"%"},children:[Object(A.jsx)(K,Object(i.a)(Object(i.a)({},l),{},{path:r.concat(["top"]),updateWorkspace:c})),Object(A.jsx)("div",{className:"workspace-resize-handle "+(m?"is-dragging":""),onMouseDown:O}),Object(A.jsx)(K,Object(i.a)(Object(i.a)({},u),{},{path:r.concat(["bottom"]),updateWorkspace:c}))]});case"hsplit":return Object(A.jsxs)("div",{ref:p,className:"workspace-node workspace-hsplit "+(m?"is-dragging":""),style:{flexBasis:n+"%"},children:[Object(A.jsx)(K,Object(i.a)(Object(i.a)({},d),{},{path:r.concat(["left"]),updateWorkspace:c})),Object(A.jsx)("div",{className:"workspace-resize-handle "+(m?"is-dragging":""),onMouseDown:O}),Object(A.jsx)(K,Object(i.a)(Object(i.a)({},j),{},{path:r.concat(["right"]),updateWorkspace:c}))]});case"node":return Object(A.jsx)("div",{ref:p,className:"workspace-node",style:{flexBasis:n+"%"},children:function(){switch(s.type){case"empty":return Object(A.jsx)(V,{data:s,path:r,updateWorkspace:c});case"stats":return Object(A.jsx)(P,{data:s,path:r,updateWorkspace:c});case"pools":return Object(A.jsx)(H,{data:s,path:r,updateWorkspace:c});case"wallet":return Object(A.jsx)(q,{data:s,path:r,updateWorkspace:c});case"chart":return Object(A.jsx)(J,{data:s,path:r,updateWorkspace:c});case"history":return Object(A.jsx)(X,{data:s,path:r,updateWorkspace:c});case"manualTransaction":return Object(A.jsx)(Y,{data:s,path:r,updateWorkspace:c});case"trade":return Object(A.jsx)(G,{data:s,path:r,updateWorkspace:c});default:throw new Error("Unknown terminal node type: "+s.type)}}()});default:throw new Error("Unknown node type: "+t)}}var Q=0;function Z(e){var t=e.onClose,n=Object(a.useState)(!1),s=Object(o.a)(n,2),r=(s[0],s[1]),c=v("wallets",F),i=Object(o.a)(c,2),l=i[0],j=i[1],h=Object(a.useState)(""),m=Object(o.a)(h,2),f=m[0],x=m[1],O=Object(a.useState)(""),w=Object(o.a)(O,2),g=w[0],k=w[1];function N(){return(N=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return(a=Object(d.a)(u.a.mark((function e(){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.sendCustomRequest({jsonrpc:"2.0",method:"get_accounts"});case 3:if(n=e.sent,a=n.find((function(e){return 931===e.network}))){e.next=7;break}return e.abrupt("return",alert("Thorchain wallet not available"));case 7:s={type:"walletconnect",address:a.address,network:"mainnet"},j(y(l,{connected:s,selected:s})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),alert("Error: "+e.t0.toString());case 15:r(!1);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)},n=function(){return a.apply(this,arguments)},(t=new p.a({bridge:"https://bridge.walletconnect.org",qrcodeModal:b.a})).on("connect",function(){var e=Object(d.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return alert("Error connecting: "+t.message),e.abrupt("return",console.error(t));case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.on("session_update",(function(e,t){if(e)return console.error(e)})),t.on("disconnect",(function(e,t){if(e)return console.error(e);j(y(l,{connected:null,selected:null}))})),!(Q>=3)){e.next=10;break}return e.next=9,t.killSession();case 9:Q=0;case 10:Q++,t.connected?n():t.createSession();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){j(y(l,{selected:e})),t()}function W(e,t){t.stopPropagation(),navigator.clipboard.writeText(e.address)}function I(e,t){t.stopPropagation(),j(y(l,{watched:l.watched.filter((function(t,n){return n!==e}))}))}return Object(a.useEffect)((function(){var e=function(e){t&&"Escape"===e.key&&t()};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[]),Object(A.jsxs)("div",{className:"modal",onClick:t,children:[Object(A.jsx)("div",{className:"modal-overlay"}),Object(A.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(A.jsx)("h1",{children:"Wallets"}),Object(A.jsx)("div",{className:"text-bold mb-2 mt-4",children:"Connected"}),l.connected?Object(A.jsxs)("div",{className:"row p-2 bg-gray-800 rounded pointer hover:opacity-75",onClick:S.bind(null,l.connected),children:[Object(A.jsxs)("div",{children:[C(l.connected.address)," (",l.connected.network,")"]}),Object(A.jsxs)("div",{className:"flex-shrink text-right",children:[Object(A.jsx)("a",{className:"ml-2",onClick:W.bind(null,l.connected),children:"Copy"}),Object(A.jsx)("a",{className:"ml-2",onClick:function(e){e.stopPropagation();var t=l.selected;t.address===l.connected.address&&(t=null),j(y(l,{connected:null,selected:t}))},children:"Remove"})]})]}):Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)("button",{className:"btn w-full mr-2",onClick:function(){if(!window.xfi||!window.xfi.thorchain)return alert("XDEFI is not installed!");window.xfi.thorchain.request({method:"request_accounts",params:[]},(function(e,t){if(e)return console.log(e),alert("Error connecting to XDEFI: "+e.message);var n={type:"xdefi",address:t[0],network:window.xfi.thorchain.network};j(y(l,{connected:n,selected:n}))}))},children:"Connect XDEFI"}),Object(A.jsx)("button",{className:"btn w-full",onClick:function(){return N.apply(this,arguments)},children:"Connect WalletConnect"})]}),Object(A.jsx)("div",{className:"text-bold mb-2 mt-4",children:"Watched"}),l.watched.map((function(e,t){return Object(A.jsxs)("div",{className:"row p-2 mb-2 bg-gray-800 rounded pointer hover:opacity-75",onClick:S.bind(null,e),children:[Object(A.jsxs)("div",{children:[C(e.address)," ",e.label?"(".concat(e.label,")"):""," (",e.network,")"]}),Object(A.jsxs)("div",{className:"flex-shrink text-right",children:[Object(A.jsx)("a",{className:"ml-2",onClick:W.bind(null,e),children:"Copy"}),Object(A.jsx)("a",{className:"ml-2",onClick:I.bind(null,t),children:"Remove"})]})]},e.address)})),Object(A.jsxs)("form",{className:"row",onSubmit:function(e){e.preventDefault();var t={type:"watched",address:f,network:f.startsWith("thor")?"mainnet":"testnet",label:g};x(""),k(""),j(y(l,{watched:l.watched.concat([t])}))},children:[Object(A.jsxs)("div",{style:{flex:"1"},children:[Object(A.jsx)("label",{children:"Address"}),Object(A.jsx)("input",{type:"text",value:f,onChange:function(e){return x(e.target.value)}})]}),Object(A.jsxs)("div",{style:{flex:"0 0 150px"},children:[Object(A.jsx)("label",{children:"Label (opt)"}),Object(A.jsx)("input",{type:"text",value:g,onChange:function(e){return k(e.target.value)}})]}),Object(A.jsxs)("div",{style:{flex:"0 0 60px"},children:[Object(A.jsx)("label",{children:"\xa0"}),Object(A.jsx)("button",{type:"submit",className:"btn w-full",children:"Add"})]})]})]})]})}var ee=!1,te={left:"right",right:"left",top:"bottom",bottom:"top"};function ne(e){var t=e.workspaces,n=e.setWorkspaces,a=e.selectedWorkspaceIndex,s=e.setSelectedWorkspaceIndex;return Object(A.jsxs)("div",{className:"workspaces-nav",children:[Object(A.jsx)("div",{className:"workspaces-nav-current",children:t[a].name}),Object(A.jsxs)("div",{className:"workspaces-nav-dropdown",children:[t.map((function(e,t){return Object(A.jsx)("a",{onClick:function(){return s(t)},className:a===t?"is-active":"",children:e.name},t)})),Object(A.jsxs)("a",{onClick:function(e){e.preventDefault(),n((function(e){return e=e.concat({name:"new workspace",root:{type:"node",size:100,data:{type:"empty"}}})}))},title:"add",children:[Object(A.jsx)(B,{name:"plus"})," add"]}),Object(A.jsxs)("a",{onClick:function(e){e.preventDefault(),n((function(e){return e.splice(a,1),e.splice()}))},title:"delete",children:[Object(A.jsx)(B,{name:"trash"})," delete"]}),Object(A.jsxs)("a",{onClick:function(e){e.preventDefault();var s=prompt("New Name",t[a].name);s&&n((function(e){var t=a;return e[t]=Object(i.a)(Object(i.a)({},e[t]),{},{name:s}),e.slice()}))},title:"rename",children:[Object(A.jsx)(B,{name:"edit"})," rename"]}),Object(A.jsxs)("a",{onClick:function(e){e.preventDefault(),localStorage.workspaces=JSON.stringify(t)},title:"save",children:[Object(A.jsx)(B,{name:"save"})," save"]})]})]})}var ae=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],s=t[1],r=v("wallets",{}),c=Object(o.a)(r,1)[0].selected,l=v("pools",[]),u=Object(o.a)(l,2),d=(u[0],u[1]),j=v("stats",null),p=Object(o.a)(j,2),h=(p[0],p[1]),b=v("wallets"),m=Object(o.a)(b,2),f=m[0],x=m[1],O=Object(a.useState)(JSON.parse(localStorage.workspaces||z)),k=Object(o.a)(O,2),N=k[0],S=k[1],W=Object(a.useState)(0),I=Object(o.a)(W,2),E=I[0],M=I[1],L=N[E];return Object(a.useEffect)((function(){localStorage.wallets&&"undefined"!==localStorage.wallets&&x(JSON.parse(localStorage.wallets))}),[]),Object(a.useEffect)((function(){var e=JSON.stringify(f);localStorage.wallets!==e&&(localStorage.wallets=e)}),[f]),Object(a.useEffect)((function(){var e=function(){var e=(null===c||void 0===c?void 0:c.network)||"mainnet";g(e,"/thorchain/pools").then((function(t){var n=t.find((function(t){return t.asset===D[e]})),a=parseInt(n.balance_asset)/parseInt(n.balance_rune),s=t.reduce((function(e,t){var n=a*(parseInt(t.balance_rune)/parseInt(t.balance_asset)),s=parseInt(t.balance_rune)/Math.pow(10,8)*a*2;return e[t.asset]={asset:t.asset,status:t.status.toLowerCase(),price:n,depth:s,depthAsset:parseInt(t.balance_asset),depthRune:parseInt(t.balance_rune),units:parseInt(t.pool_units),apy:0,volume:0},e}),{});ee||d(Object.values(s).sort((function(e,t){return e.asset>t.asset}))),w(e,"/pools").then((function(e){ee=!0,e.forEach((function(e){if(s[e.asset]){var t=parseFloat(e.volume24h)/Math.pow(10,8)*parseFloat(e.assetPriceUSD)/parseFloat(e.assetPrice)||0;s[e.asset].apy=parseFloat(e.poolAPY),s[e.asset].volume=t}})),d(Object.values(s).sort((function(e,t){return e.asset>t.asset})))})).catch((function(){d(Object.values(s).sort((function(e,t){return e.asset>t.asset})))}))})),w(e,"/stats").then(h)};e();var t=setInterval(e,15e3);return function(){return clearInterval(t)}}),[null===c||void 0===c?void 0:c.network]),Object(A.jsxs)("div",{children:[Object(A.jsxs)("header",{className:"header",children:[Object(A.jsx)("a",{className:"header-brand",href:"/",children:"thorbelt"}),Object(A.jsx)("div",{className:"header-workspaces",children:Object(A.jsx)(ne,{workspaces:N,setWorkspaces:S,selectedWorkspaceIndex:E,setSelectedWorkspaceIndex:M})}),Object(A.jsx)("div",{className:"nav nav-right",children:Object(A.jsx)("a",{className:"nav-text text-primary",onClick:function(){s({type:"configureAddress"})},children:c?C(c.address)+" ("+c.network+")":"(no wallet connected)"})})]}),Object(A.jsx)("div",{className:"workspace",children:Object(A.jsx)(K,Object(i.a)(Object(i.a)({},L.root),{},{path:[],updateWorkspace:function(e,t){if(0===t.length)L.root=e(L.root);else{var n=t.slice(0,-1).reduce((function(e,t){return e[t]}),L.root),a=t[t.length-1],s=n?n[a]:L.root;(s=e(s))?n[a]=s:Object.assign(n,y(n[te[a]],{size:n.size}))}N[E]=y({},L),S(N.slice()),window.globalWorkspaces=N}}))}),"configureAddress"===n.type?Object(A.jsx)(Z,{onClose:function(){return s({})}}):null]})};c.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(ae,{})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.80ac4a5e.chunk.js.map